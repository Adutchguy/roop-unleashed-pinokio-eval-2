<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 656 4038" style="max-width: 656px;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-diagram-mermaid-7bxl73a"><style>#mermaid-diagram-mermaid-7bxl73a{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-diagram-mermaid-7bxl73a .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-diagram-mermaid-7bxl73a .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-diagram-mermaid-7bxl73a .error-icon{fill:#a44141;}#mermaid-diagram-mermaid-7bxl73a .error-text{fill:#ddd;stroke:#ddd;}#mermaid-diagram-mermaid-7bxl73a .edge-thickness-normal{stroke-width:1px;}#mermaid-diagram-mermaid-7bxl73a .edge-thickness-thick{stroke-width:3.5px;}#mermaid-diagram-mermaid-7bxl73a .edge-pattern-solid{stroke-dasharray:0;}#mermaid-diagram-mermaid-7bxl73a .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-diagram-mermaid-7bxl73a .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-diagram-mermaid-7bxl73a .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-diagram-mermaid-7bxl73a .marker{fill:lightgrey;stroke:lightgrey;}#mermaid-diagram-mermaid-7bxl73a .marker.cross{stroke:lightgrey;}#mermaid-diagram-mermaid-7bxl73a svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-diagram-mermaid-7bxl73a p{margin:0;}#mermaid-diagram-mermaid-7bxl73a .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#ccc;}#mermaid-diagram-mermaid-7bxl73a .cluster-label text{fill:#F9FFFE;}#mermaid-diagram-mermaid-7bxl73a .cluster-label span{color:#F9FFFE;}#mermaid-diagram-mermaid-7bxl73a .cluster-label span p{background-color:transparent;}#mermaid-diagram-mermaid-7bxl73a .label text,#mermaid-diagram-mermaid-7bxl73a span{fill:#ccc;color:#ccc;}#mermaid-diagram-mermaid-7bxl73a .node rect,#mermaid-diagram-mermaid-7bxl73a .node circle,#mermaid-diagram-mermaid-7bxl73a .node ellipse,#mermaid-diagram-mermaid-7bxl73a .node polygon,#mermaid-diagram-mermaid-7bxl73a .node path{fill:#1f2020;stroke:#ccc;stroke-width:1px;}#mermaid-diagram-mermaid-7bxl73a .rough-node .label text,#mermaid-diagram-mermaid-7bxl73a .node .label text,#mermaid-diagram-mermaid-7bxl73a .image-shape .label,#mermaid-diagram-mermaid-7bxl73a .icon-shape .label{text-anchor:middle;}#mermaid-diagram-mermaid-7bxl73a .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-diagram-mermaid-7bxl73a .rough-node .label,#mermaid-diagram-mermaid-7bxl73a .node .label,#mermaid-diagram-mermaid-7bxl73a .image-shape .label,#mermaid-diagram-mermaid-7bxl73a .icon-shape .label{text-align:center;}#mermaid-diagram-mermaid-7bxl73a .node.clickable{cursor:pointer;}#mermaid-diagram-mermaid-7bxl73a .root .anchor path{fill:lightgrey!important;stroke-width:0;stroke:lightgrey;}#mermaid-diagram-mermaid-7bxl73a .arrowheadPath{fill:lightgrey;}#mermaid-diagram-mermaid-7bxl73a .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}#mermaid-diagram-mermaid-7bxl73a .flowchart-link{stroke:lightgrey;fill:none;}#mermaid-diagram-mermaid-7bxl73a .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaid-diagram-mermaid-7bxl73a .edgeLabel p{background-color:hsl(0, 0%, 34.4117647059%);}#mermaid-diagram-mermaid-7bxl73a .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaid-diagram-mermaid-7bxl73a .labelBkg{background-color:rgba(87.75, 87.75, 87.75, 0.5);}#mermaid-diagram-mermaid-7bxl73a .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}#mermaid-diagram-mermaid-7bxl73a .cluster text{fill:#F9FFFE;}#mermaid-diagram-mermaid-7bxl73a .cluster span{color:#F9FFFE;}#mermaid-diagram-mermaid-7bxl73a div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-diagram-mermaid-7bxl73a .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#ccc;}#mermaid-diagram-mermaid-7bxl73a rect.text{fill:none;stroke-width:0;}#mermaid-diagram-mermaid-7bxl73a .icon-shape,#mermaid-diagram-mermaid-7bxl73a .image-shape{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}#mermaid-diagram-mermaid-7bxl73a .icon-shape p,#mermaid-diagram-mermaid-7bxl73a .image-shape p{background-color:hsl(0, 0%, 34.4117647059%);padding:2px;}#mermaid-diagram-mermaid-7bxl73a .icon-shape rect,#mermaid-diagram-mermaid-7bxl73a .image-shape rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}#mermaid-diagram-mermaid-7bxl73a :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram-mermaid-7bxl73a_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram-mermaid-7bxl73a_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-diagram-mermaid-7bxl73a_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-diagram-mermaid-7bxl73a_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="Processing" class="cluster"><rect height="2026" width="370" y="1420" x="143" style=""></rect><g transform="translate(291.54166412353516, 1420)" class="cluster-label"><foreignObject height="24" width="72.91667175292969"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Processing</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="704" width="510.5052032470703" y="642" x="67.74739837646484" style=""></rect><g transform="translate(256.8958282470703, 642)" class="cluster-label"><foreignObject height="24" width="132.20834350585938"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Preview &amp; Settings</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="480" width="640" y="112" x="8" style=""></rect><g transform="translate(260.4583282470703, 112)" class="cluster-label"><foreignObject height="24" width="135.08334350585938"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Upload &amp; Selection</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph2" class="cluster"><rect height="1192" width="330" y="2229" x="163" style=""></rect><g transform="translate(253.484375, 2229)" class="cluster-label"><foreignObject height="24" width="149.03125"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Inside process_face()</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M328,62L328,66.167C328,70.333,328,78.667,328,87C328,95.333,328,103.667,328,111.333C328,119,328,126,328,129.5L328,133"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C1_0" d="M243.458,210.908L231.715,215.756C219.972,220.605,196.486,230.303,184.743,238.651C173,247,173,254,173,257.5L173,261"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C1_C2_0" d="M173,391L173,395.167C173,399.333,173,407.667,173,415.333C173,423,173,430,173,433.5L173,437"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_D1_0" d="M412.542,210.908L424.285,215.756C436.028,220.605,459.514,230.303,471.257,238.651C483,247,483,254,483,257.5L483,261"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D1_D2_0" d="M483,391L483,395.167C483,399.333,483,407.667,483,415.333C483,423,483,430,483,433.5L483,437"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C2_E_0" d="M173,567L173,571.167C173,575.333,173,583.667,173,592C173,600.333,173,608.667,173,617C173,625.333,173,633.667,180.899,641.707C188.798,649.746,204.597,657.493,212.496,661.366L220.395,665.239"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D2_E_0" d="M483,567L483,571.167C483,575.333,483,583.667,483,592C483,600.333,483,608.667,483,617C483,625.333,483,633.667,475.101,641.707C467.202,649.746,451.403,657.493,443.504,661.366L435.605,665.239"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_0" d="M328,769L328,773.167C328,777.333,328,785.667,328,793.333C328,801,328,808,328,811.5L328,815"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_0" d="M328,969L328,973.167C328,977.333,328,985.667,328,993.333C328,1001,328,1008,328,1011.5L328,1015"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_0" d="M328,1145L328,1149.167C328,1153.333,328,1161.667,328,1169.333C328,1177,328,1184,328,1187.5L328,1191"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_H_I_0" d="M328,1321L328,1325.167C328,1329.333,328,1337.667,328,1348C328,1358.333,328,1370.667,328,1383C328,1395.333,328,1407.667,328,1417.333C328,1427,328,1434,328,1437.5L328,1441"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_J_0" d="M328,1523L328,1527.167C328,1531.333,328,1539.667,328,1547.333C328,1555,328,1562,328,1565.5L328,1569"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_K_0" d="M328,1699L328,1703.167C328,1707.333,328,1715.667,328,1723.333C328,1731,328,1738,328,1741.5L328,1745"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_K_L_0" d="M328,1875L328,1879.167C328,1883.333,328,1891.667,328,1899.333C328,1907,328,1914,328,1917.5L328,1921"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_M_0" d="M328,2027L328,2031.167C328,2035.333,328,2043.667,328,2051.333C328,2059,328,2066,328,2069.5L328,2073"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_M_N_0" d="M328,2179L328,2183.167C328,2187.333,328,2195.667,328,2204C328,2212.333,328,2220.667,328,2228.333C328,2236,328,2243,328,2246.5L328,2250"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_N_O_0" d="M328,2332L328,2336.167C328,2340.333,328,2348.667,328,2356.333C328,2364,328,2371,328,2374.5L328,2378"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_O_P_0" d="M328,2484L328,2488.167C328,2492.333,328,2500.667,328,2508.333C328,2516,328,2523,328,2526.5L328,2530"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_P_Q_0" d="M328,2636L328,2640.167C328,2644.333,328,2652.667,328,2660.333C328,2668,328,2675,328,2678.5L328,2682"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Q_R_0" d="M328,2788L328,2792.167C328,2796.333,328,2804.667,328,2812.333C328,2820,328,2827,328,2830.5L328,2834"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_R_S_0" d="M328,2916L328,2920.167C328,2924.333,328,2932.667,328,2940.333C328,2948,328,2955,328,2958.5L328,2962"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_S_T_0" d="M328,3092L328,3096.167C328,3100.333,328,3108.667,328,3116.333C328,3124,328,3131,328,3134.5L328,3138"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_T_U_0" d="M328,3268L328,3272.167C328,3276.333,328,3284.667,328,3292.333C328,3300,328,3307,328,3310.5L328,3314"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_U_V_0" d="M328,3396L328,3400.167C328,3404.333,328,3412.667,328,3421C328,3429.333,328,3437.667,328,3446C328,3454.333,328,3462.667,328,3470.333C328,3478,328,3485,328,3488.5L328,3492"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_V_W_0" d="M328,3622L328,3626.167C328,3630.333,328,3638.667,328,3646.333C328,3654,328,3661,328,3664.5L328,3668"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_W_X_0" d="M328,3798L328,3802.167C328,3806.333,328,3814.667,328,3822.333C328,3830,328,3837,328,3840.5L328,3844"></path><path marker-end="url(#mermaid-diagram-mermaid-7bxl73a_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_X_Y_0" d="M328,3926L328,3930.167C328,3934.333,328,3942.667,328,3950.333C328,3958,328,3965,328,3968.5L328,3972"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(328, 1383)" class="edgeLabel"><g transform="translate(-70.58333587646484, -12)" class="label"><foreignObject height="24" width="141.1666717529297"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>Start button clicked</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(328, 35)" id="flowchart-A-0" class="node default"><rect height="54" width="212.7291717529297" y="-27" x="-106.36458587646484" style="" class="basic label-container"></rect><g transform="translate(-76.36458587646484, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="152.7291717529297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Start: User opens app</p></span></div></foreignObject></g></g><g transform="translate(328, 176)" id="flowchart-B-1" class="node default"><rect height="78" width="169.08333587646484" y="-39" x="-84.54166793823242" style="" class="basic label-container"></rect><g transform="translate(-54.54166793823242, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="109.08333587646484"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>UI launches<br>faceswap_tab()</p></span></div></foreignObject></g></g><g transform="translate(173, 328)" id="flowchart-C1-3" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Upload source images / facesets<br>bt_srcfiles.change() → on_srcfile_changed()</p></span></div></foreignObject></g></g><g transform="translate(173, 504)" id="flowchart-C2-5" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Extract &amp; display input faces<br>extract_face_images() → Gallery input_faces</p></span></div></foreignObject></g></g><g transform="translate(483, 328)" id="flowchart-D1-7" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Upload target images/videos<br>bt_destfiles.change() → on_destfiles_changed()</p></span></div></foreignObject></g></g><g transform="translate(483, 504)" id="flowchart-D2-9" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Extract &amp; display target faces (if needed)<br>extract_face_images() → Gallery target_faces</p></span></div></foreignObject></g></g><g transform="translate(328, 718)" id="flowchart-E-12" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>User selects faces / mode<br>Gallery .select() → on_select_*()</p></span></div></foreignObject></g></g><g transform="translate(328, 894)" id="flowchart-F-14" class="node default"><rect height="150" width="260" y="-75" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -60)" style="" class="label"><rect></rect><foreignObject height="120" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Adjust settings<br>Face Quality, Enhancer (GPEN), Subsample (512px), Blend ratio, Mask, etc.</p></span></div></foreignObject></g></g><g transform="translate(328, 1082)" id="flowchart-G-16" class="node default"><rect height="126" width="270.5625" y="-63" x="-135.28125" style="" class="basic label-container"></rect><g transform="translate(-105.28125, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="210.5625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Preview frame selected<br>preview_frame_num or bt_refresh_preview → on_preview_frame_changed()</p></span></div></foreignObject></g></g><g transform="translate(328, 1258)" id="flowchart-H-18" class="node default"><rect height="126" width="271.0104217529297" y="-63" x="-135.50521087646484" style="" class="basic label-container"></rect><g transform="translate(-105.50521087646484, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="211.0104217529297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Live swap preview<br>live_swap() → process_mgr.process_frame() → process_face()</p></span></div></foreignObject></g></g><g transform="translate(328, 1484)" id="flowchart-I-20" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>bt_start.click() → start_swap()</p></span></div></foreignObject></g></g><g transform="translate(328, 1636)" id="flowchart-J-22" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Prepare options<br>ProcessOptions(...) with face_quality, subsample_size, etc.</p></span></div></foreignObject></g></g><g transform="translate(328, 1812)" id="flowchart-K-24" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Batch / In-memory processing<br>batch_process_regular() or run_batch_inmem()</p></span></div></foreignObject></g></g><g transform="translate(328, 1976)" id="flowchart-L-26" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Frame loop<br>process_frame() or process_videoframes()</p></span></div></foreignObject></g></g><g transform="translate(328, 2128)" id="flowchart-M-28" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Face detection + selection<br>get_first_face() / get_all_faces()</p></span></div></foreignObject></g></g><g transform="translate(328, 2293)" id="flowchart-N-30" class="node default"><rect height="78" width="185.2916717529297" y="-39" x="-92.64583587646484" style="" class="basic label-container"></rect><g transform="translate(-62.645835876464844, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="125.29167175292969"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Process each face<br>process_face()</p></span></div></foreignObject></g></g><g transform="translate(328, 2433)" id="flowchart-O-32" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Align &amp; crop target face<br>align_crop() → 512×512 or capped size</p></span></div></foreignObject></g></g><g transform="translate(328, 2585)" id="flowchart-P-34" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Pixel boost tiling<br>implode_pixel_boost() → 4×4 tiles for 512px</p></span></div></foreignObject></g></g><g transform="translate(328, 2737)" id="flowchart-Q-36" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Swap tiles<br>FaceSwapInsightFace.Run() on each 128×128 tile</p></span></div></foreignObject></g></g><g transform="translate(328, 2877)" id="flowchart-R-38" class="node default"><rect height="78" width="243.6875" y="-39" x="-121.84375" style="" class="basic label-container"></rect><g transform="translate(-91.84375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="183.6875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Reassemble swapped face<br>explode_pixel_boost()</p></span></div></foreignObject></g></g><g transform="translate(328, 3029)" id="flowchart-S-40" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Enhance (GPEN/CodeFormer/etc.)<br>p.Run() with strength via blend_ratio</p></span></div></foreignObject></g></g><g transform="translate(328, 3205)" id="flowchart-T-42" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Paste back into original frame<br>paste_upscale() with mask blending &amp; Lanczos</p></span></div></foreignObject></g></g><g transform="translate(328, 3357)" id="flowchart-U-44" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Optional: mouth restore, rotation fix</p></span></div></foreignObject></g></g><g transform="translate(328, 3559)" id="flowchart-V-46" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Save processed frame/video<br>cv2.imwrite() or FFMPEG_VideoWriter</p></span></div></foreignObject></g></g><g transform="translate(328, 3735)" id="flowchart-W-48" class="node default"><rect height="126" width="260" y="-63" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Output files appear in resultfiles<br>→ resultimage / resultvideo displayed</p></span></div></foreignObject></g></g><g transform="translate(328, 3887)" id="flowchart-X-50" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>User views / downloads output</p></span></div></foreignObject></g></g><g transform="translate(328, 4003)" id="flowchart-Y-52" class="node default"><rect height="54" width="85.92708396911621" y="-27" x="-42.963541984558105" style="" class="basic label-container"></rect><g transform="translate(-12.963541984558105, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="25.92708396911621"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>End</p></span></div></foreignObject></g></g></g></g></g></svg>